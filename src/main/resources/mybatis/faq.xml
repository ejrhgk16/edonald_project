<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edonald.faq.dao.FaqMapper">
	<select id="listAll" resultType="com.edonald.faq.dto.FaqDto">
		SELECT * FROM (SELECT row_number() over(ORDER BY f.faq_subject,f.faq_seq ASC) rnum, f.* FROM faq f 
	    WHERE 1=1
		<if test="subject != 'ALL'.toString"> AND f.faq_subject = #{subject}</if>
   		<if test="search != null"> AND f.faq_title like CONCAT('%',#{search},'%') </if>
   		<![CDATA[
		ORDER BY rnum ASC ) list 
		WHERE rnum >= #{start} AND rnum <= #{end};
		]]>
	</select>
	<select id="listSize" resultType="_int">
		SELECT COUNT(faq_seq) FROM faq 
		WHERE 1=1
		<if test="subject != 'ALL'.toString"> AND faq_subject = #{subject} </if>
		<if test="search != null"> AND faq_title like CONCAT('%',#{search},'%') </if>
	</select>
</mapper>