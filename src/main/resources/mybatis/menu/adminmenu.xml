<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edonald.hadmin.dao.AdminMenuMapper">
	<select id="getMenu" resultType="com.edonald.hadmin.dto.MenuDto">
		SELECT * FROM menu WHERE seq = #{seq}
	</select>
	<select id="listAll" resultType="com.edonald.hadmin.dto.MenuDto">
		SELECT * FROM menu m ORDER BY status DESC,category_code,seq ASC
	</select>
	<update id="updateStatus">
		UPDATE menu SET status = #{status} WHERE code = #{code}
	</update>
	<insert id="insert">
		INSERT INTO menu VALUES(
			#{code},
			#{name},
			#{kcal},
			#{img_path},
			#{set_img_path},
			#{status},
			#{category_code},
			#{type},
			#{price},
			#{allergy},
			NULL
			) 
	</insert>
	<update id="update">
		UPDATE menu SET 
			code = #{code},
			name = #{name},
			kcal = #{kcal},
			<if test="img_path != null">img_path = #{img_path},</if>
			<if test="set_img_path != null">set_img_path = #{set_img_path},</if>
			category_code = #{category_code},
			type = #{type},
			price = #{price},
			allergy = #{allergy}
		WHERE seq = #{seq}
	</update>
</mapper>