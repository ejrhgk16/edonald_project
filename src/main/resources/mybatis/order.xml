<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edonald.order.dao.OrderMapper">
	<select id="getTogetherPackBurgerList" resultType="com.edonald.hadmin.dto.MenuDto">
		select * from menu where type = 'burger' and sub_to = 1
	</select>
	<select id="getTogetherPackSideList" resultType="com.edonald.hadmin.dto.MenuDto">
		select * from menu where type = 'side' and sub_to = 1
	</select>
	<select id="getTogetherPackSourceList" resultType="com.edonald.hadmin.dto.MenuDto">
		select * from menu where type = 'side' and category_code = 15
	</select>

	<select id="getBurgerLSetSideList" resultType="com.edonald.hadmin.dto.MenuDto">
		select * from menu where type = 'side' and sub_ls = 1
	</select>
	<select id="getBurgerSetSideList" resultType="com.edonald.hadmin.dto.MenuDto">
		select * from menu where type = 'side' and sub_s = 1
	</select>
	
	<select id="getDrinkList" resultType="com.edonald.hadmin.dto.MenuDto">
		select * from menu where type = 'drink' and sub_s = 1
	</select>
	
	
	<select id="getDrinkPrice" resultType="int">
		select price from menu where type = 'drink' and name = #{drinkname}
	</select>
	
	<select id="getBurgerPrice" resultType="int">
		select price from menu where type = 'burger' and name = #{burgername}
	</select>

	
	


	<select id="checkOrderNum" resultType="com.edonald.order.dto.OrderNumDto">
	select * from check_order_num where order_num = #{order_num} and order_date = date_format(sysdate( ), '%Y-%m-%d' )
	</select>
	
	<insert id="insertOrderNum">
		insert into check_order_num(user_phone, order_num, order_date)  values(#{user_phone}, #{order_num}, #{order_date}) 
	</insert>
	
		<insert id="insertOrderInfo">
		insert into order_list(user_type, user_name, order_date, user_address, user_phone, order_status, total_price, discount, final_price, order_comment, store_code, cupone_code, merchanuid, user_email, cupon_title, postcode, payment_type, imp_uid)
										  values(#{user_type}, #{user_name}, #{order_date}, #{user_address}, #{user_phone}, #{order_status}, #{total_price}, #{discount}, #{final_price},  #{order_comment},  #{store_code},  #{cupone_code}, #{merchanuid}, #{user_email}, #{cupon_title}, #{postcode}, #{payment_type}, #{imp_uid}) 
	</insert>
	
		<insert id="insertCartInfo">
		insert into cart_list(cart_product_code, cart_product_name, cart_product_img_path, cart_product_price, cart_product_quant, merchanuid, comp1_name, comp2_name, comp3_name, comp4_name, comp5_name, comp6_name, comp7_name, comp8_name, menu_type, comp_type, calc_price)  
		values(#{cart_product_code}, #{cart_product_name}, #{cart_product_img_path}, #{cart_product_price}, #{cart_product_quant}, #{merchanuid}, #{comp1_name}, #{comp2_name}, #{comp3_name}, #{comp4_name}, #{comp5_name}, #{comp6_name}, #{comp7_name}, #{comp8_name}, #{menu_type}, #{comp_type}, #{calc_price}) 
	</insert>
	
	<select id="getOrderInfoByUid" resultType="com.edonald.order.dto.OrderListDto">
	select * from order_list where merchanuid = #{merchanuid}
	</select>
	
	<select id="getCartListByUid" resultType="com.edonald.order.dto.CartDto">
	select * from cart_list where merchanuid = #{merchanuid}
	</select>
	
	<select id="checkMenuStatus" resultType="int">
	select bol_seq from block_order_list where store_code = #{store_code} and m_seq=#{menu_code}
	</select>
	
	<select id="checkStoreStatus" resultType="int">
	select store_status from store_list where store_code = #{store_code}
	</select>
	
	<select id="getStoreName" resultType="String">
	select store_name from store_list where store_code = #{store_code}
	</select>
	
	<select id="getMenuStatus" resultType="int">
		select status from menu where seq = #{seq}
	</select>
	
	
	
</mapper>